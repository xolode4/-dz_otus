Причина неработоспособности
Скорее всего, проблема связана с SELinux, который ограничивает доступ к файлам и портам, используемым DNS-сервером. SELinux может блокировать обновления зоны, если не настроены соответствующие контексты и политики.
Возможные решения
Отключить SELinux: Это быстрое решение, но не рекомендуется в производственной среде из-за потенциальных угроз безопасности.
Изменить контекст SELinux: Настроить правильные контексты для файлов и портов, используемых DNS-сервером.
Использовать setsebool: Включить булево значение SELinux, разрешающее обновления зоны DNS.
Выбор решения
Выберем решение 3: использование setsebool. Это решение позволяет сохранить SELinux включенным и обеспечивает безопасность, одновременно разрешая необходимые операции.
Реализация решения
Включение булева значения SELinux:
bash
Copy
sudo setsebool -P named_write_master_zones 1
Перезапуск службы DNS:
bash
Copy
sudo systemctl restart named
Проверка работоспособности:
На клиентской станции выполнить команду nsupdate:
bash
Copy
nsupdate -k /etc/named.zonetransfer.key
> server 192.168.50.10
> zone ddns.lab
> update add www.ddns.lab. 60 A 192.168.50.15
> send
Если обновление проходит успешно, значит проблема решена.
Демонстрация работоспособности
Скриншоты и описание:
Скриншот успешного выполнения команды nsupdate на клиентской станции.
Скриншот состояния сервиса DNS на сервере после перезапуска.
Скриншот текущего значения булева параметра SELinux (getsebool named_write_master_zones).
Таким образом, проблема с удаленным обновлением зоны DNS была успешно решена с помощью изменения булева значения SELinux.
